{% extends "base.html" %}

{% block style %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='form.css') }}">
{% endblock %}

{% set form = action.content.form %}
{% set content = action.content %}

{% block header %}
<a href="/" class="link">
    <h2>GuideLight</h2>
</a>
<ul class="arrows">
    <li><a class="link" href="/search">Suche</a></li>
    <li><a class="link" href="/entity/{{entity.short}}">{{entity.name}}</a></li>
    {% for key in form %}
    {% set step = content.get(key) %}
    <li class="step">{{ step.title }}</li>
    {% endfor %}
</ul>
{% endblock %}

{% block bar %}
{% for key in form %}
{% set step = content.get(key) %}
<p class="step">{{ step.info }}</p>
{% endfor %}
{% endblock %}

{% block content %}
<form>
    {% for key in form %}
    {% set step = content.get(key) %}
    <div class="step">
        {# <p>{{ step.title }}</p> #}
        <p>{{ step.text }}</p>
        {% if step.type == "info" %}
        {# erstmal nichtsweiter #}
        {% elif step.type == "user" %}
        <fieldset>
            <legend>Eingabe</legend>
            {% for item in step.content %}

            {% if item.input == "checkbox" %}
            <input class="{{key}}" id="{{ item.name }}" name="{{ item.name }}" type="checkbox" value="{{ item.value }}"
                data-form="">

            {% elif item.input == "text" %}
            <input class="{{key}}" id="{{ item.name }}" name="{{ item.name }}" type="text" placeholder="{{ item.placeholder }}">

            {% elif item.input == "date" %}
            <input class="{{key}}" id="{{ item.name }}" name="{{ item.name }}" type="date">

            {% else %}
            <p> EIN FEHLER: {{item}}</p>

            {% endif %}
            <label for="{{item.name}}">{{ item.label }}</label>

            {% endfor %}
        </fieldset>
        {% elif step.type == "auto" %}
        {# erstmal nichtsweiter #}
        {% elif step.type == "summary" %}
        <p id="summary"></p>
        <button type="button" class="btn" id="pdfBtn">PDF speichern</button>
        <button type="button" class="btn" id="mailBtn">Mail verschicken</button>
        <button type="button" class="btn" id="copyBtn">Text kopieren</button>
        {# erstmal nichtsweiter #}
        {% endif %}
    </div>
    {% endfor %}
</form>
<div class="navigation-container">
    <button type="button" class="btn" id="prevBtn">zur√ºck</button>
    <button type="button" class="btn" id="nextBtn">weiter</button>
</div>

<script>content = JSON.parse('{{ content | tojson | safe}}');</script>
<script>entity = JSON.parse('{{ entity | tojson | safe}}');</script>
<script src="{{ url_for('static',filename='pdfmake/build/pdfmake.js') }}"></script>
<script src="{{ url_for('static',filename='pdfmake/build/vfs_fonts.js') }}"></script>
<script src="{{ url_for('static',filename='form.js') }}"></script>
{% endblock %}